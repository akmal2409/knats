name: CI Pipeline
run-name: ${{ github.actor }} triggered CI build
on: [push]
jobs:
  CI-Pipeline:
    runs-on: ubuntu-latest
    steps:
      - run: echo "üêß This job is now running on a ${{ runner.os }} server"
      - run: echo "Building branch ${{ github.ref }}"
      - name: Checkout
        uses: actions/checkout@v4
      - name: Set up Gradle
        uses: gradle/gradle-build-action@v2
      - name: Check style
        run: ./gradlew detekt
      - name: Run tests
        run: ./gradlew test
      - name: Publish artifact
        run: ./gradlew publish
        env:
          CI_TOKEN: ${{ secrets.CI_TOKEN }}
          CI_USER: ${{ secrets.CI_USER }}
      - name: Upload coverage reports to Codecov
        uses: codecov/codecov-action@v4.0.1
        with:
          token: ${{ secrets.CODECOV_TOKEN }}
